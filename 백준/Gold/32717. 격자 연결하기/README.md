# [Gold IV] 격자 연결하기 - 32717 

[문제 링크](https://www.acmicpc.net/problem/32717) 

### 성능 요약

메모리: 21840 KB, 시간: 96 ms

### 분류

다이나믹 프로그래밍

### 제출 일자

2024년 11월 29일 16:45:26

### 문제 설명

<p>각 격자에 정수가 적힌 $N\times M$크기의 격자판이 있다. <strong>격자판 점수</strong>는 $2$개의 격자를 선택하여 최단 경로로 연결했을 때, 연결된 경로에 있는 격자들에 적힌 수의 합으로 계산한다.</p>

<p style="text-align: center;"><img alt="" src="" style="height: 300px; width: 300px;"></p>

<p>최단 경로가 여러 개인 경우, 어떤 경로를 선택해도 무관하다. 연결된 경로에는 선택한 격자들도 포함된다. 같은 위치의 격자를 중복하여 선택할 수도 있는데, 이 경우 해당 격자의 수를 한 번만 더한다.</p>

<p>임의의 두 격자를 선택했을 때, 얻을 수 있는 격자판 점수의 최댓값을 구해보자.</p>

### 입력 

 <p>첫째 줄에 격자판의 세로 크기 $N$과 가로 크기 $M$이 공백으로 구분되어 주어진다. $\left(1\leq N,M\leq 1,000\right)$</p>

<p>둘째 줄부터 $N$줄에 걸쳐 격자의 점수 $A_{ij}$가 공백으로 구분되어 주어진다. $(\left|A_{ij}\right|\leq 1,000;$ $1\leq i\leq N;$ $1\leq j\leq M)$</p>

### 출력 

 <p>두 격자를 선택했을 때, 얻을 수 있는 격자판 점수의 최댓값을 출력한다.</p>

